<p>Turn the network connection on/off to see the changes.</p>

<p>Initial connection state was <b id="status">unknown</b>.</p>

<div id="target"></div>

<script>
  document.getElementById("status").innerHTML = navigator.onLine ? "online" : "offline";

  var target = document.getElementById("target");

  function handleStateChange() {
    var timeBadge = new Date().toTimeString().split(" ")[0];
    var newState = document.createElement("p");
    var state = navigator.onLine ? "online" : "offline";
    newState.innerHTML = "" + timeBadge + " Connection state changed to " + state + ".";
    target.appendChild(newState);
  }

  window.addEventListener("online", handleStateChange);
  window.addEventListener("offline", handleStateChange);
</script>
